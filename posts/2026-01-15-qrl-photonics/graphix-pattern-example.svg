<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 300">
  <!-- Title -->
  <text x="450" y="30" font-family="Arial, sans-serif" font-size="22" font-weight="bold" text-anchor="middle" fill="#2c3e50">
    graphix Pattern: Bell State in 5 Commands
  </text>

  <!-- Pattern command sequence -->
  <g id="pattern-sequence">
    <!-- Command 1: N(0) -->
    <g id="cmd1">
      <rect x="50" y="70" width="140" height="80" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" rx="8"/>
      <text x="120" y="95" font-family="monospace" font-size="18" font-weight="bold" text-anchor="middle" fill="#2e7d32">
        N(0)
      </text>
      <text x="120" y="120" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
        Prepare qubit 0
      </text>
      <text x="120" y="138" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">
        in |+⟩ state
      </text>
    </g>

    <!-- Arrow -->
    <path d="M 195 110 L 215 110" stroke="#9e9e9e" stroke-width="2" marker-end="url(#arrow)"/>

    <!-- Command 2: N(1) -->
    <g id="cmd2">
      <rect x="220" y="70" width="140" height="80" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" rx="8"/>
      <text x="290" y="95" font-family="monospace" font-size="18" font-weight="bold" text-anchor="middle" fill="#2e7d32">
        N(1)
      </text>
      <text x="290" y="120" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
        Prepare qubit 1
      </text>
      <text x="290" y="138" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">
        in |+⟩ state
      </text>
    </g>

    <!-- Arrow -->
    <path d="M 365 110 L 385 110" stroke="#9e9e9e" stroke-width="2" marker-end="url(#arrow)"/>

    <!-- Command 3: E(0,1) -->
    <g id="cmd3">
      <rect x="390" y="70" width="140" height="80" fill="#f3e5f5" stroke="#9c27b0" stroke-width="2" rx="8"/>
      <text x="460" y="95" font-family="monospace" font-size="18" font-weight="bold" text-anchor="middle" fill="#7b1fa2">
        E(0,1)
      </text>
      <text x="460" y="120" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
        Entangle qubits
      </text>
      <text x="460" y="138" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">
        CZ gate
      </text>
    </g>

    <!-- Arrow -->
    <path d="M 535 110 L 555 110" stroke="#9e9e9e" stroke-width="2" marker-end="url(#arrow)"/>

    <!-- Command 4: M(0) -->
    <g id="cmd4">
      <rect x="560" y="70" width="140" height="80" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="8"/>
      <text x="630" y="95" font-family="monospace" font-size="18" font-weight="bold" text-anchor="middle" fill="#1565c0">
        M(0)
      </text>
      <text x="630" y="120" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
        Measure qubit 0
      </text>
      <text x="630" y="138" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">
        X basis
      </text>
    </g>

    <!-- Arrow -->
    <path d="M 705 110 L 725 110" stroke="#9e9e9e" stroke-width="2" marker-end="url(#arrow)"/>

    <!-- Command 5: X(1,{0}) -->
    <g id="cmd5">
      <rect x="730" y="70" width="140" height="80" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="8"/>
      <text x="800" y="95" font-family="monospace" font-size="18" font-weight="bold" text-anchor="middle" fill="#e65100">
        X(1,{0})
      </text>
      <text x="800" y="120" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
        Apply X to q₁
      </text>
      <text x="800" y="138" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#666">
        if m₀ = 1
      </text>
    </g>
  </g>

  <!-- Visual representation -->
  <g id="visual">
    <rect x="50" y="180" width="820" height="90" fill="#f5f5f5" stroke="#bdbdbd" stroke-width="1" rx="5"/>

    <!-- Qubits -->
    <circle cx="120" cy="220" r="18" fill="#4caf50" stroke="#2e7d32" stroke-width="2"/>
    <text x="120" y="227" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white" font-weight="bold">
      0
    </text>
    <text x="120" y="252" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
      |+⟩
    </text>

    <circle cx="290" cy="220" r="18" fill="#4caf50" stroke="#2e7d32" stroke-width="2"/>
    <text x="290" y="227" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white" font-weight="bold">
      1
    </text>
    <text x="290" y="252" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
      |+⟩
    </text>

    <!-- Entanglement -->
    <line x1="138" y1="220" x2="272" y2="220" stroke="#9c27b0" stroke-width="3" stroke-dasharray="5,3"/>
    <text x="205" y="213" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#9c27b0" font-weight="bold">
      CZ
    </text>

    <!-- Measurement -->
    <rect x="410" y="200" width="80" height="40" fill="#e3f2fd" stroke="#2196f3" stroke-width="2" rx="5"/>
    <text x="450" y="225" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1565c0" font-weight="bold">
      Measure
    </text>

    <!-- Arrow -->
    <path d="M 308 220 L 405 220" stroke="#2196f3" stroke-width="2" marker-end="url(#arrow-blue)"/>

    <!-- Outcome -->
    <circle cx="580" cy="220" r="15" fill="#ff9800" stroke="#e65100" stroke-width="2"/>
    <text x="580" y="227" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="white" font-weight="bold">
      m
    </text>

    <!-- Arrow -->
    <path d="M 495 220 L 563 220" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-orange)"/>

    <!-- Correction arrow down -->
    <path d="M 580 238 Q 720 270 800 238" fill="none" stroke="#f57c00" stroke-width="2" marker-end="url(#arrow-orange)" stroke-dasharray="3,3"/>
    <text x="690" y="270" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#f57c00">
      if m=1
    </text>

    <!-- Output qubit -->
    <circle cx="800" cy="220" r="18" fill="#4caf50" stroke="#2e7d32" stroke-width="2"/>
    <text x="800" y="227" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="white" font-weight="bold">
      1
    </text>
    <text x="800" y="252" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#2e7d32" font-weight="bold">
      Output
    </text>
  </g>

  <!-- Result -->
  <text x="450" y="295" font-family="Arial, sans-serif" font-size="13" text-anchor="middle" fill="#424242">
    Result: Bell state (|00⟩ + |11⟩)/√2 created via measurement pattern
  </text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#9e9e9e" />
    </marker>
    <marker id="arrow-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#2196f3" />
    </marker>
    <marker id="arrow-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#f57c00" />
    </marker>
  </defs>
</svg>
